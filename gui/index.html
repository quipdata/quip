<html>
<head>
	<script src='https://cdn.firebase.com/js/client/1.0.11/firebase.js'></script>
	<script src='lib/functions.js'></script>
	<script src='lib/jquery-2.1.0.min.js'></script>
	<script src="lib/kinetic.prototype.js"></script>
	<script src="lib/kinetic+.js"></script>
	<script src="lib/kinetic-v5.1.0.min.js"></script>
	<script src='lib/uuid.js'></script>
</head>
<body>
	<button onclick="refresh()">Refresh</button>
	<div name="console" id="console" style="border-style: solid;min-width: 800px;min-height: 500px;">Loading...</div>
	<button onclick="refresh()">Refresh</button>
    <script>
    	var fbModel = new Firebase('https://shining-fire-3212.firebaseio.com/Model');
    	var model = {};
    	
    	fbModel.once('value', function(data) {
			model = data.val();
			refresh();
		});
		
		function refresh(){
			var NBS = '&nbsp;&nbsp;';
			
			var sModel = JSON.stringify(model);
			var output = '';
			var indent = 0;
			for( var i = 0; i < sModel.length; i++ ){
				if( sModel[i] == '{' || sModel[i] == '['  ){						
					indent += 4;
					
					output += sModel[i] + '<br />'
					
					for( var j = 1; j < indent; j++ )
						output += NBS;
				} else if( sModel[i] == '}' || sModel[i] == ']' ){
					indent -= 4
					
					output += '<br />';
					
					for( var j = 1; j < indent; j++ )
						output += NBS;
					
					output += sModel[i];
				} else if ( sModel[i] == ',' ){
					output += sModel[i] + '<br />'
					
					for( var j = 1; j < indent; j++ )
						output += NBS;
				} else {
					output += sModel[i];
				}
			}
			$('#console').html(output);
		}
    </script>
  </body>
</html>